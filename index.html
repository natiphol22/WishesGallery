<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tuck & Tan ‚Äì Multi-Step Post</title>
  <!-- ‡∏ü‡∏≠‡∏ô‡∏ï‡πå Kanit -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet"/>
  <style>
    body, html {
      margin: 0; padding: 0;
      font-family: 'Kanit', sans-serif;
      background: #f0f2f5;
      color: #262626;
      height: 100%;
      overflow: hidden;
    }
    #root { height: 100%; }

    .btn {
      padding: .6rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }
    .btn-primary {
      background: #405de6;
      color: #fff;
    }
    .btn-secondary {
      background: #ccc;
      color: #333;
    }

    .step {
      position: absolute; top:0; left:0; right:0; bottom:0;
      display: flex; flex-direction: column;
      background: #fff;
    }

    .header {
      padding: 1rem; display:flex; justify-content: space-between; align-items:center;
      background: #fafafa; border-bottom:1px solid #eee;
    }
    .header .title { color: #666; font-size: 1rem; }

    .step1 {
      justify-content: center; align-items: center;
    }
    .step1 .btn-add {
      font-size: 2rem;
    }

    .slider {
      flex:1; position: relative; overflow: hidden;
      background: #000;
    }
    .slides {
      display: flex; height:100%;
      touch-action: pan-y;
    }
    .slide {
      min-width:100%; display:flex; justify-content:center; align-items:center;
    }
    .slide img {
      max-width: 100%; max-height:100%;
      object-fit: cover;
      filter: brightness(1.1) saturate(1.1) contrast(1.05);
    }
    .slide .trash {
      position: absolute; top:10px; right:10px;
      background: rgba(255,255,255,0.8);
      border:none; border-radius:50%; padding:.4rem;
      cursor:pointer;
    }

    .form {
      padding: 1rem;
      background: #fff;
    }
    .form input, .form textarea {
      width:100%; padding:.8rem; margin-bottom:1rem;
      border:1px solid #ddd; border-radius:8px;
      font-size: 1rem;
    }

    .success {
      flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; padding:2rem;
    }

    .lightbox {
      position: fixed; inset:0;
      background: rgba(0,0,0,0.8);
      display:flex; justify-content:center; align-items:center;
      z-index:1000;
    }
    .lightbox img {
      max-width:90%; max-height:90%;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>

  <script type="text/javascript">
    const { useState, useRef } = React;
    const { motion, AnimatePresence } = window['framer-motion'];

    function App() {
      const [step, setStep] = useState(1);
      const [files, setFiles] = useState([]);
      const [index, setIndex] = useState(0);
      const [name, setName] = useState('');
      const [text, setText] = useState('');
      const [showLightbox, setShowLightbox] = useState(false);
      const fileInput = useRef();

      const onAdd = () => fileInput.current.click();
      const onFiles = e => {
        const selected = Array.from(e.target.files).map(f => URL.createObjectURL(f));
        if (selected.length) {
          setFiles(selected);
          setIndex(0);
          setStep(2);
        }
      };

      const nextFrom2 = () => setStep(3);
      const removeCurrent = () => {
        const arr = files.slice();
        arr.splice(index,1);
        if (!arr.length) return setStep(1);
        setFiles(arr);
        setIndex(i => i % arr.length);
      };
      const slide = dir => {
        setIndex(i => (i + dir + files.length) % files.length);
      };

      const onPost = () => setStep(4);
      const reset = () => {
        setStep(1);
        setFiles([]); setName(''); setText('');
      };

      return (
        <div style={{height:'100%', position:'relative'}}>
          <AnimatePresence initial={false} mode="wait">
            {step === 1 && (
              <motion.div
                key="s1" className="step step1"
                initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}
              >
                <button className="btn btn-primary btn-add" onClick={onAdd}>Ôºã ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
                <input ref={fileInput} type="file" accept="image/*" multiple style={{display:'none'}}
                  onChange={onFiles}/>
              </motion.div>
            )}
            {step === 2 && (
              <motion.div
                key="s2" className="step"
                initial={{x:'100%'}} animate={{x:0}} exit={{x:'-100%'}}
                transition={{type:'tween'}}
              >
                <div className="header">
                  <span className="title">‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</span>
                  <button className="btn btn-primary" onClick={nextFrom2}>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ &gt;</button>
                </div>
                <div className="slider">
                  <div className="slides">
                    {files.map((url,i) => (
                      <div key={i} className="slide" style={{transform:`translateX(${(i-index)*100}%)`}}>
                        <img src={url}/>
                        <button className="trash" onClick={removeCurrent}>üóëÔ∏è</button>
                      </div>
                    ))}
                  </div>
                </div>
                <div
                  style={{position:'absolute', top:0,left:0,right:0,bottom:0}}
                  onTouchStart={e=> this.touchX = e.touches[0].clientX}
                  onTouchEnd={e=>{
                    const dx = e.changedTouches[0].clientX - this.touchX;
                    if (dx > 50) slide(-1);
                    else if (dx < -50) slide(1);
                  }}
                />
              </motion.div>
            )}
            {step === 3 && (
              <motion.div
                key="s3" className="step"
                initial={{y:'100%'}} animate={{y:0}} exit={{y:'-100%'}}
                transition={{type:'spring'}}
              >
                <div className="header">
                  <button className="btn btn-secondary" onClick={()=>setStep(2)}>&lt; ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà</button>
                  <button className="btn btn-primary" disabled={!text.trim()} onClick={onPost}>‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
                </div>
                <div className="slider">
                  <div className="slides">
                    {files.map((url,i) => (
                      <div key={i} className="slide" style={{transform:`translateX(${(i-index)*100}%)`}}>
                        <img src={url}/>
                      </div>
                    ))}
                  </div>
                </div>
                <div className="form">
                  <input
                    type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"
                    value={name} onChange={e=>setName(e.target.value)}
                  />
                  <textarea
                    rows="4" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏à‡∏≤‡∏Å‡πÉ‡∏à üíå"
                    value={text} onChange={e=>setText(e.target.value)}
                  />
                </div>
                <div
                  style={{position:'absolute', top:0,left:0,right:0,bottom:0}}
                  onTouchStart={e=> this.touchX = e.touches[0].clientX}
                  onTouchEnd={e=>{
                    const dx = e.changedTouches[0].clientX - this.touchX;
                    if (dx > 50) slide(-1);
                    else if (dx < -50) slide(1);
                  }}
                />
              </motion.div>
            )}
            {step === 4 && (
              <motion.div
                key="s4" className="step success"
                initial={{scale:0.8, opacity:0}} animate={{scale:1, opacity:1}} exit={{opacity:0}}
              >
                <h2>üéâ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì!</h2>
                <p>üíñ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏£‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤</p>
                <div style={{marginTop:'1.5rem'}}>
                  <button className="btn btn-secondary" onClick={reset}>‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                  <button className="btn btn-primary" style={{marginLeft:'1rem'}} onClick={()=>setShowLightbox(true)}>‡∏î‡∏π‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                </div>
              </motion.div>
            )}
          </AnimatePresence>
          {showLightbox && (
            <div className="lightbox" onClick={()=>setShowLightbox(false)}>
              <img src={files[index]} />
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>
</body>
</html>
